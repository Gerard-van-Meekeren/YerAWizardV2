@using WebMatrix.Data

@{
    Validation.RequireField("Post", "You must enter content");
    //Validation.RequireField("User", "You must login first");

    var gebruiker = "";
    var text = "";
    var Date = DateTime.Now.ToShortDateString();
    var Time = DateTime.Now.ToShortTimeString();

    string connectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\Harry_Potter.mdf;Integrated Security=True";

    string provider = "System.Data.SqlClient";
    ///oof
    Database db = Database.OpenConnectionString(connectionString, provider);
    ///oooooooooooof
    var getRef = "SELECT * FROM [Comments]";
    var Id = db.Execute(getRef);

    if (IsPost && Validation.IsValid())
    {
        gebruiker = Request.Form["Username"];
        text = Request.Form["Post"];
        var insertcomment = "INSERT INTO [Comments] ([Post], [User], [Date], [Time]) Values (@0, @1, @2, @3)";
        db.Execute(insertcomment, text, gebruiker, Date, Time);
    }

    var showcomments = "SELECT * FROM [Comments]";
    var Post = db.Query(showcomments);
    var grid = new WebGrid(source: Post);
}

<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <style>
        .post {
            height: 20px;
            border-radius: 5px;
        }

        .grid {
            margin: 4px;
            width: 600px;
        }

            .grid th, .grid td {
                padding: 5px;
            }

        .Poststyle {
            text-align: justify;
        }
    </style>
</head>
<body>
    @Html.ValidationSummary()
    <form method="post">
        <input class="post" type="text" name="Post" value="@Request.Form["Post"]" />
        <input type="submit" style="border-radius: 25px;" name="submitcomment" />
    </form>

    <div>
        @grid.GetHtml(
          tableStyle: "grid",
          alternatingRowStyle: "alt",
          columns: grid.Columns(
                grid.Column("Post"),
                grid.Column("User"),
                grid.Column("Date"),
                grid.Column("Time")
                )

            )
    </div>
</body>
</html>

